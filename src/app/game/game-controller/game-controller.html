<div class="absolute inset-0 w-full h-full bg-white z-50" [class.hidden]="!flash()"></div>

<div class="game-container select-none">
  <div
    class="p-3 backdrop-blur-xl max-w-3xl mx-auto rounded-xl shadow-2xl bg-white/20 border-4 border-white"
  >
    <div class="flex justify-center items-center w-full px-24 py-12">
      <div class="grid grid-cols-4 gap-4 w-full max-w-xl">
        @for (card of gameDeck; track $index) {
          <div
            (mouseover)="debug(card.suit, card.value)"
            class="card-anim-wrapper"
            [class.deal-anim]="dealAnimationActive()"
            [style.animationDelay]="$index * 0.08 + 's'"
          >
            <card
              [matched]="matchedIndices().includes($index)"
              [class.pointer-events-none]="dealAnimationActive() || locked()"
              [suit]="card.suit"
              [value]="card.value"
              [isFlipped]="previewActive() || flippedIndices().includes($index)"
              (flipRequest)="flipCard($index)"
            ></card>
          </div>
        }
      </div>
    </div>
    <div class="flex justify-between items-center">
      <button
        (click)="resetGame()"
        class="text-5xl bg-teal-500/30 backdrop-blur-xl px-5 py-1 rounded-2xl text-white cursor-pointer hover:scale-105 hover:bg-teal-300 transition-all duration-200"
      >
        Reset
      </button>
      <span class="text-5xl bg-teal-500/30 backdrop-blur-xl px-5 py-1 rounded-2xl text-white"
        >TIME: {{ timeLeft() }}</span
      >
    </div>
  </div>
  <combo-component
    [currentCombo]="currentCombo()"
    (emitCombo)="addCombo($event)"
    [gameOver]="timeLeft() <= 0 || matchedIndices().length === gameDeck.length"
  ></combo-component>
</div>
